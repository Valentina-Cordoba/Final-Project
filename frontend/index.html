<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" href="./assets/favicon.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed&family=Heebo&display=swap" rel="stylesheet">
  <title>Formulario de registro</title>
</head>

<body>


  <header>
    <img id="logo" src="assets\logo.png" alt="logo">
  </header>

  <h1>Formulario de registro</h1>

  <form action="">

    <label for="roles">Selecciona un rol:</label>
    <select id="roles"></select>

    <label for="ID"> Número de identificación: </label>
    <input type="text" name="ID" id="ID" placeholder="Cédula de ciudadanía">

    <label for="Nombre">Nombre:</label>
    <input type="text" name="Nombre" id="Nombre" placeholder="Ingrese su nombre">

    <label for="Apellidos"> Apellidos: </label>
    <input type="text" name="Apellidos" id="Apellidos" placeholder="Ingrese sus apellidos">

    <label for="Fecha"> Fecha de nacimiento:</label>
    <input type="date" name="Fecha" id="Fecha" min="1900-12-31" max="2023-12-31">

    <label for="Edad">Edad:</label>
    <input type="number" name="Edad" id="Edad">

    <label for="Telefono"> Número de Contacto:</label>
    <input type="text" name="Telefono" id="Telefono" placeholder="Telefono fijo o celular">

    <label for="email"> Email: </label>
    <input type="email" name="email" id="email" placeholder="Correo electrónico">

    <label for="usuario"> Nombre de Usuario:</label>
    <input type="text" name="usuario" id="usuario" placeholder="Ingrese su nombre de usuario">

    <label for="password"> Contraseña:</label>
    <input type="password" name="password" id="password" placeholder="Números, letras y un símbolo">

    <div class="container">
      <input class="checkmark"  checked="checked" type="checkbox">
      Estoy de acuerdo con <a href="#"> Terminos y Condiciones </a>
    </div>

    <input class="btn" id="submit" type="submit" value="Registrarme">
    <input class="btn"  type="reset" value="Borrar">

    <p> <a href="#"> ¿Ya tengo un usuario? </a></p>



  </form>


  <script>
    const rolesSelect = document.getElementById('roles');
    const infoRolDiv = document.getElementById('infoRol');

    // Función para obtener los datos de los roles desde el servidor
    async function getRoles() {
      try {
        const response = await fetch('/roles');
        const roles = await response.json();

        roles.forEach((rol) => {
          const option = document.createElement('option');
          option.value = rol._id;
          option.textContent = rol.nombre;
          rolesSelect.appendChild(option);
        });

        // Escuchar los cambios en la lista desplegable
        rolesSelect.addEventListener('change', () => {
          const selectedRoleId = rolesSelect.value;
          mostrarInformacionRol(selectedRoleId);
        });
      } catch (err) {
        console.error('Error al obtener los roles:', err);
      }
    }

    // Función para mostrar la información del rol seleccionado
    async function mostrarInformacionRol(rolId) {
      try {
        const response = await fetch(`/roles/${rolId}`);
        const rol = await response.json();

        // Mostrar la información del rol en el div correspondiente
        infoRolDiv.innerHTML = `
          <h3>${rol.nombre}</h3>
          <p>${rol.descripcion}</p>
          <!-- Otros campos que quieras mostrar -->
        `;
      } catch (err) {
        console.error('Error al obtener la información del rol:', err);
      }
    }

    // Llamar a la función para obtener los roles al cargar la página
    getRoles();
  </script>

</body>

</html>